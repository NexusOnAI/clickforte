<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Fornecedores - Fevereiro/2025</title>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1, h2 {
      margin: 10px 0;
    }
    .top-bar {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .chart-container {
      margin-bottom: 50px;
    }
    .fullscreen-btn {
      cursor: pointer;
      padding: 8px 12px;
      border: 1px solid #aaa;
      background: #f4f4f4;
      border-radius: 4px;
    }
    .fullscreen-btn:hover {
      background: #e8e8e8;
    }
    /* Card para exibir o total geral */
    .total-card {
      display: inline-block;
      margin: 10px 0 20px 0;
      padding: 10px 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: #f9f9f9;
      font-weight: bold;
      font-size: 1.1em;
    }
  </style>
</head>
<body>
  <h1>Fornecedores - Fevereiro/2025</h1>

  <!-- Barra de filtros e botões (SEM tabela) -->
  <div class="top-bar">
    <!-- SELECT para filtrar descrição (fornecedor) -->
    <label for="descSelect"><strong>Filtrar Fornecedor:</strong></label>
    <select id="descSelect">
      <!-- Opções criadas via JavaScript -->
    </select>

    <!-- Botão Tela Cheia -->
    <button class="fullscreen-btn" onclick="toggleFullScreen()">
      Tela Cheia
    </button>

    <!-- Botão Visão Geral (Pizza) -->
    <button id="overviewBtn" class="fullscreen-btn">
      Visão Geral
    </button>
  </div>

  <!-- Área para inserir os gráficos dinamicamente -->
  <div id="charts-container"></div>

  <script>
    // --------------------------------------------------------------------
    // 1) Dados brutos (Fornecedores de Fevereiro/2025)
    // --------------------------------------------------------------------
    const rawData = [
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"385099", date:"02/03/2025", valorPago:"R$ 3.404,10" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"385099", date:"02/03/2025", valorPago:"R$ 12.879,88" },
      { descricao: "ROCHESA S/A TINTAS E VERNIZES", nf:"206903", date:"02/03/2025", valorPago:"R$ 21.060,27" },
      { descricao: "FERGRAFPLASTIC", nf:"234", date:"02/03/2025", valorPago:"R$ 15.621,00" },
      { descricao: "ARAUCO", nf:"295579", date:"02/03/2025", valorPago:"R$ 79.186,62" },
      { descricao: "TRZ MOVELARIA", nf:"", date:"02/03/2025", valorPago:"R$ 19.784,54" },
      { descricao: "SCALA PLÁSTICOS", nf:"", date:"02/03/2025", valorPago:"R$ 3.552,00" },
      { descricao: "LOTUS", nf:"", date:"02/03/2025", valorPago:"R$ 8.508,60" },
      { descricao: "LOTUS", nf:"", date:"02/03/2025", valorPago:"R$ 20.497,20" },
      { descricao: "MB DECOR", nf:"", date:"02/03/2025", valorPago:"R$ 18.991,00" },
      { descricao: "JOMARCA INDUSTRIAL DE PARAFUSOS LTDA", nf:"856298", date:"02/04/2025", valorPago:"R$ 10.225,41" },
      { descricao: "CAPACK INDUSTRIA E COMERCIO DE PAPEL LTDA.", nf:"1665", date:"02/04/2025", valorPago:"R$ 2.411,55" },
      { descricao: "VN EPS", nf:"", date:"02/04/2025", valorPago:"R$ 8.188,05" },
      { descricao: "MUNDIAL GÁS", nf:"", date:"02/04/2025", valorPago:"R$ 420,00" },
      { descricao: "CAPACK", nf:"PF=1665", date:"02/04/2025", valorPago:"R$ 11.883,00" },
      { descricao: "EUCATEX RAFA", nf:"304009", date:"02/05/2025", valorPago:"R$ 22.713,54" },
      { descricao: "EUCATEX RAFA", nf:"304010", date:"02/05/2025", valorPago:"R$ 22.713,54" },
      { descricao: "EUCATEX RAFA", nf:"304011", date:"02/05/2025", valorPago:"R$ 22.713,54" },
      { descricao: "EUCATEX RAFA", nf:"304015", date:"02/05/2025", valorPago:"R$ 25.869,62" },
      { descricao: "EUCATEX RAFA", nf:"304016", date:"02/05/2025", valorPago:"R$ 25.869,62" },
      { descricao: "EUCATEX RAFA", nf:"304017", date:"02/05/2025", valorPago:"R$ 25.869,62" },
      { descricao: "FERNANDO REIS", nf:"", date:"02/05/2025", valorPago:"R$ 200,00" },
      { descricao: "VPLAST ACESSORIOS PARA MOVEIS LTDA", nf:"26249", date:"02/05/2025", valorPago:"R$ 5.098,49" },
      { descricao: "CONTHEY PRESENTES E DECORACOES LTDA", nf:"14599", date:"02/05/2025", valorPago:"R$ 7.599,82" },
      { descricao: "CAPACK", nf:"PF=1667", date:"02/05/2025", valorPago:"R$ 2.962,08" },
      { descricao: "Cianureto Comercio de Ferro e aco EIRELI", nf:"2770", date:"02/05/2025", valorPago:"R$ 5.880,00" },
      { descricao: "CAPACK INDUSTRIA E COMERCIO DE PAPEL LTDA.", nf:"1667", date:"02/05/2025", valorPago:"R$ 601,13" },
      { descricao: "EUCATEX RAFA", nf:"304018", date:"02/05/2025", valorPago:"R$ 22.713,54" },
      { descricao: "EUCATEX RAFA", nf:"304019", date:"02/05/2025", valorPago:"R$ 22.713,54" },
      { descricao: "EUCATEX RAFA", nf:"304020", date:"02/05/2025", valorPago:"R$ 22.713,54" },
      { descricao: "Cianureto Comercio de Ferro e aco EIRELI", nf:"2771", date:"02/06/2025", valorPago:"R$ 5.460,00" },
      { descricao: "MUNDIAL GÁS", nf:"", date:"02/06/2025", valorPago:"R$ 210,00" },
      { descricao: "EUCATEX RAFA", nf:"304021", date:"02/06/2025", valorPago:"R$ 23.146,08" },
      { descricao: "DZAINER", nf:"OF", date:"02/06/2025", valorPago:"R$ 23.128,00" },
      { descricao: "EUCATEX RAFA", nf:"304022", date:"02/06/2025", valorPago:"R$ 23.146,08" },
      { descricao: "EUCATEX RAFA", nf:"304023", date:"02/06/2025", valorPago:"R$ 23.146,08" },
      { descricao: "ACM FIBRAS", nf:"6841", date:"02/06/2025", valorPago:"R$ 35.640,50" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"382117", date:"02/05/2025", valorPago:"R$ 12.880,00" },
      { descricao: "CONTHEY PRESENTES E DECORACOES LTDA", nf:"14730", date:"02/07/2025", valorPago:"R$ 11.400,04" },
      { descricao: "ROCHESA S/A TINTAS E VERNIZES", nf:"207298", date:"02/07/2025", valorPago:"R$ 21.060,27" },
      { descricao: "IMD COMERCIO DE MOVEIS LTDA", nf:"307550", date:"02/07/2025", valorPago:"R$ 29.000,00" },
      { descricao: "ACM FIBRAS", nf:"6842", date:"02/07/2025", valorPago:"R$ 32.500,00" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"224770", date:"02/10/2025", valorPago:"R$ 71.590,14" },
      { descricao: "VERTICALPACK INDUSTRIA, COMERCIO E SERVICOS DE EMBALAGENS LT", nf:"5067", date:"02/10/2025", valorPago:"R$ 2.570,25" },
      { descricao: "FERGRAFPLASTIC", nf:"235", date:"02/10/2025", valorPago:"R$ 9.089,50" },
      { descricao: "FERGRAFPLASTIC", nf:"236", date:"02/10/2025", valorPago:"R$ 7.429,50" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"385966", date:"02/10/2025", valorPago:"R$ 9.199,77" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"388413", date:"02/10/2025", valorPago:"R$ 11.040,32" },
      { descricao: "BIGFER IND E COM DE FERRAGENS LTDA", nf:"2317041", date:"02/10/2025", valorPago:"R$ 2.580,00" },
      { descricao: "MULTIVISÃO", nf:"224778", date:"02/10/2025", valorPago:"R$ 4.516,66" },
      { descricao: "VERTICAL PACK", nf:"PF=5067", date:"02/10/2025", valorPago:"R$ 20.115,00" },
      { descricao: "MULTIVISÃO", nf:"224822", date:"02/10/2025", valorPago:"R$ 4.384,35" },
      { descricao: "MULTIVISÃO", nf:"224828", date:"02/10/2025", valorPago:"R$ 447,38" },
      { descricao: "CAROÇO", nf:"PF=224778", date:"02/10/2025", valorPago:"R$ 39.370,89" },
      { descricao: "CAROÇO", nf:"PF=224822, 224828", date:"02/10/2025", valorPago:"R$ 42.112,97" },
      { descricao: "MB DECOR", nf:"", date:"02/10/2025", valorPago:"R$ 37.037,96" },
      { descricao: "LOTUS", nf:"", date:"02/10/2025", valorPago:"R$ 18.442,20" },
      { descricao: "DZAINER", nf:"PF", date:"02/11/2025", valorPago:"R$ 22.400,00" },
      { descricao: "Cianureto Comercio de Ferro e aco EIRELI", nf:"2772", date:"02/11/2025", valorPago:"R$ 5.880,00" },
      { descricao: "BARUERI", nf:"7375128", date:"02/11/2025", valorPago:"R$ 544,93" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"224891", date:"02/11/2025", valorPago:"R$ 4.951,91" },
      { descricao: "MUNDIAL GÁS", nf:"", date:"02/11/2025", valorPago:"R$ 420,00" },
      { descricao: "Rrv comercio e serviços", nf:"", date:"02/11/2025", valorPago:"R$ 12.768,00" },
      { descricao: "MULTIVISÃO", nf:"224860", date:"02/11/2025", valorPago:"R$ 805,29" },
      { descricao: "MULTIVISÃO", nf:"224843", date:"02/11/2025", valorPago:"R$ 638,09" },
      { descricao: "MULTIVISÃO", nf:"224873", date:"02/11/2025", valorPago:"R$ 2.634,61" },
      { descricao: "MULTIVISÃO", nf:"224890", date:"02/11/2025", valorPago:"R$ 4.289,79" },
      { descricao: "ARAUCO", nf:"296105", date:"02/12/2025", valorPago:"R$ 79.186,62" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"224872", date:"02/12/2025", valorPago:"R$ 40.373,02" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"224874", date:"02/12/2025", valorPago:"R$ 11.374,02" },
      { descricao: "CONTHEY PRESENTES E DECORACOES LTDA", nf:"14765", date:"02/12/2025", valorPago:"R$ 27.200,18" },
      { descricao: "CAROÇO", nf:"PF=224860, 224843, 224873, 224890", date:"02/12/2025", valorPago:"R$ 18.000,00" },
      { descricao: "ARAUCO", nf:"296095", date:"02/12/2025", valorPago:"R$ 79.186,62" },
      { descricao: "ACM FIBRAS", nf:"6846", date:"02/12/2025", valorPago:"R$ 57.771,57" },
      { descricao: "CAROÇO", nf:"PF=224860, 224843, 224873, 224890", date:"02/12/2025", valorPago:"R$ 32.000,00" },
      { descricao: "Cianureto Comercio de Ferro e aco EIRELI", nf:"2774", date:"2/13/2025", valorPago:"R$ 1.260,00" },
      { descricao: "Cianureto Comercio de Ferro e aco EIRELI", nf:"2773", date:"2/13/2025", valorPago:"R$ 6.300,00" },
      { descricao: "CONTHEY PRESENTES E DECORACOES LTDA", nf:"14600", date:"2/13/2025", valorPago:"R$ 15.199,64" },
      { descricao: "ARAUCO", nf:"358915", date:"2/13/2025", valorPago:"R$ 67.943,01" },
      { descricao: "VN EPS", nf:"", date:"2/13/2025", valorPago:"R$ 8.208,00" },
      { descricao: "CAROÇO", nf:"PF=224860, 224843, 224873, 224890", date:"2/13/2025", valorPago:"R$ 7.500,00" },
      { descricao: "CAROÇO", nf:"PF=224860, 224843, 224873, 224890", date:"2/13/2025", valorPago:"R$ 15.440,25" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225076", date:"2/14/2025", valorPago:"R$ 51.088,27" },
      { descricao: "CAPACK", nf:"1706", date:"2/14/2025", valorPago:"R$ 1.248,15" },
      { descricao: "CAPACK", nf:"1705", date:"2/14/2025", valorPago:"R$ 1.317,47" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225083", date:"2/14/2025", valorPago:"R$ 9.571,28" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225102", date:"2/14/2025", valorPago:"R$ 10.746,13" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"386714", date:"2/14/2025", valorPago:"R$ 6.900,00" },
      { descricao: "CONTHEY PRESENTES E DECORACOES LTDA", nf:"14767", date:"2/14/2025", valorPago:"R$ 40.800,27" },
      { descricao: "CAPACK", nf:"PF=1705", date:"2/14/2025", valorPago:"R$ 6.491,88" },
      { descricao: "CAPACK", nf:"PF=1706", date:"2/14/2025", valorPago:"R$ 6.150,30" },
      { descricao: "MULTIVISÃO", nf:"225077", date:"2/14/2025", valorPago:"R$ 1.276,17" },
      { descricao: "MULTIVISÃO", nf:"225085", date:"2/14/2025", valorPago:"R$ 510,47" },
      { descricao: "MULTIVISÃO", nf:"225103", date:"2/14/2025", valorPago:"R$ 4.220,80" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225084", date:"2/17/2025", valorPago:"R$ 47.772,31" },
      { descricao: "BIGFER IND E COM DE FERRAGENS LTDA", nf:"2320117", date:"2/17/2025", valorPago:"R$ 129,00" },
      { descricao: "METALURGICA BASSO LTDA", nf:"30643", date:"2/17/2025", valorPago:"R$ 618,37" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"383170", date:"2/17/2025", valorPago:"R$ 11.040,03" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"383170", date:"2/17/2025", valorPago:"R$ 2.759,97" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"389073", date:"2/17/2025", valorPago:"R$ 15.639,85" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"389073", date:"2/17/2025", valorPago:"R$ 2.760,08" },
      { descricao: "FERGRAFPLASTIC", nf:"238", date:"2/17/2025", valorPago:"R$ 15.049,50" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225194", date:"2/17/2025", valorPago:"R$ 24.227,82" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225260", date:"2/17/2025", valorPago:"R$ 19.142,55" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225259", date:"2/17/2025", valorPago:"R$ 23.871,41" },
      { descricao: "MB DECOR", nf:"", date:"2/17/2025", valorPago:"R$ 10.423,60" },
      { descricao: "SULGRILL", nf:"", date:"2/17/2025", valorPago:"R$ 9.300,00" },
      { descricao: "MUNDIAL GÁS", nf:"", date:"2/17/2025", valorPago:"R$ 420,00" },
      { descricao: "MULTIVISÃO", nf:"225147", date:"2/17/2025", valorPago:"R$ 4.559,15" },
      { descricao: "MULTIVISÃO", nf:"225193", date:"2/17/2025", valorPago:"R$ 3.562,13" },
      { descricao: "MULTIVISÃO", nf:"225195", date:"2/17/2025", valorPago:"R$ 4.831,73" },
      { descricao: "CAROÇO", nf:"PF=225077, 225085, 225103", date:"2/17/2025", valorPago:"R$ 52.366,43" },
      { descricao: "CAROÇO", nf:"PF=225147", date:"2/17/2025", valorPago:"R$ 39.731,95" },
      { descricao: "CAROÇO", nf:"PF=225193, 225195", date:"2/17/2025", valorPago:"R$ 73.167,98" },
      { descricao: "ACM FIBRAS", nf:"6848", date:"2/17/2025", valorPago:"R$ 56.792,19" },
      { descricao: "LOTUS", nf:"", date:"2/17/2025", valorPago:"R$ 36.624,80" },
      { descricao: "ARAUCO", nf:"323718", date:"2/18/2025", valorPago:"R$ 92.903,78" },
      { descricao: "ARAUCO", nf:"323722", date:"2/18/2025", valorPago:"R$ 92.903,78" },
      { descricao: "DZAINER", nf:"OF", date:"2/18/2025", valorPago:"R$ 23.128,00" },
      { descricao: "JOMARCA INDUSTRIAL DE PARAFUSOS LTDA", nf:"856298", date:"2/19/2025", valorPago:"R$ 7.750,00" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225284", date:"2/19/2025", valorPago:"R$ 4.073,21" },
      { descricao: "NEPPE", nf:"328358", date:"2/19/2025", valorPago:"R$ 242,96" },
      { descricao: "NEPPE", nf:"328384", date:"2/19/2025", valorPago:"R$ 509,00" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225293", date:"2/19/2025", valorPago:"R$ 5.726,58" },
      { descricao: "CONTHEY PRESENTES E DECORACOES LTDA", nf:"14805", date:"2/19/2025", valorPago:"R$ 15.199,64" },
      { descricao: "ARAUCO", nf:"296338", date:"2/19/2025", valorPago:"R$ 79.186,62" },
      { descricao: "ARAUCO", nf:"296363", date:"2/19/2025", valorPago:"R$ 79.186,62" },
      { descricao: "CAROÇO", nf:"PF=225261, 225265, 225280, 225281", date:"2/19/2025", valorPago:"R$ 49.085,06" },
      { descricao: "RESTAMP", nf:"", date:"2/19/2025", valorPago:"R$ 22.750,00" },
      { descricao: "MULTIVISÃO", nf:"225261", date:"2/19/2025", valorPago:"R$ 991,20" },
      { descricao: "MULTIVISÃO", nf:"225265", date:"2/19/2025", valorPago:"R$ 991,20" },
      { descricao: "MULTIVISÃO", nf:"225280", date:"2/19/2025", valorPago:"R$ 2.198,56" },
      { descricao: "MULTIVISÃO", nf:"225281", date:"2/19/2025", valorPago:"R$ 1.450,25" },
      { descricao: "BERTEL COMERCIAL ELETRICA LTDA", nf:"254232", date:"2/20/2025", valorPago:"R$ 274,81" },
      { descricao: "JOMARCA INDUSTRIAL DE PARAFUSOS LTDA", nf:"856302", date:"2/20/2025", valorPago:"R$ 18.753,05" },
      { descricao: "ARAUCO", nf:"323823", date:"2/20/2025", valorPago:"R$ 92.903,78" },
      { descricao: "ARAUCO", nf:"323831", date:"2/20/2025", valorPago:"R$ 92.903,78" },
      { descricao: "SUPIMPA", nf:"", date:"2/20/2025", valorPago:"R$ 18.777,20" },
      { descricao: "SUPIMPA", nf:"", date:"2/20/2025", valorPago:"R$ 6.753,60" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225283", date:"2/21/2025", valorPago:"R$ 80.398,71" },
      { descricao: "NORTEL SUPRIMENTOS INDUSTRIAIS LTDA", nf:"1249194", date:"2/21/2025", valorPago:"R$ 5.486,91" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"389718", date:"2/21/2025", valorPago:"R$ 15.640,00" },
      { descricao: "VERTICALPACK EMBALAGENS", nf:"5089", date:"2/21/2025", valorPago:"R$ 2.766,73" },
      { descricao: "PRD_IMD NAVEGANTES", nf:"310613", date:"2/21/2025", valorPago:"R$ 29.000,00" },
      { descricao: "VPLAST", nf:"26430", date:"2/21/2025", valorPago:"R$ 26.845,00" },
      { descricao: "DZAINER", nf:"PF", date:"2/21/2025", valorPago:"R$ 22.400,00" },
      { descricao: "JOMARCA", nf:"", date:"2/21/2025", valorPago:"R$ 17.608,50" },
      { descricao: "VN EPS", nf:"", date:"2/21/2025", valorPago:"R$ 7.296,00" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225348", date:"2/24/2025", valorPago:"R$ 73.002,83" },
      { descricao: "BIGFER IND E COM DE FERRAGENS LTDA", nf:"2324289", date:"2/24/2025", valorPago:"R$ 516,00" },
      { descricao: "FERGRAFPLASTIC", nf:"239", date:"2/24/2025", valorPago:"R$ 15.621,00" },
      { descricao: "BIGFER IND E COM DE FERRAGENS LTDA", nf:"2317041", date:"2/24/2025", valorPago:"R$ 2.580,00" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225428", date:"2/24/2025", valorPago:"R$ 18.855,92" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225430", date:"2/24/2025", valorPago:"R$ 17.880,84" },
      { descricao: "MULTIVISAO INDUSTRIA E COMERCIO LTDA", nf:"225529", date:"2/24/2025", valorPago:"R$ 39.364,59" },
      { descricao: "DZAINER", nf:"OF", date:"2/24/2025", valorPago:"R$ 12.475,02" },
      { descricao: "DZAINER", nf:"PF", date:"2/24/2025", valorPago:"R$ 12.082,35" },
      { descricao: "MULTIVISÃO", nf:"225429", date:"2/24/2025", valorPago:"R$ 2.985,22" },
      { descricao: "MULTIVISÃO", nf:"225456", date:"2/24/2025", valorPago:"R$ 5.171,28" },
      { descricao: "DZAINER", nf:"OF", date:"2/24/2025", valorPago:"R$ 23.128,00" },
      { descricao: "DZAINER", nf:"PF", date:"2/24/2025", valorPago:"R$ 22.400,00" },
      { descricao: "RESTAMP", nf:"", date:"2/24/2025", valorPago:"R$ 92.500,00" },
      { descricao: "ACM FIBRAS", nf:"6850", date:"2/24/2025", valorPago:"R$ 88.394,38" },
      { descricao: "CAROÇO", nf:"PF=225429", date:"2/24/2025", valorPago:"R$ 26.030,96" },
      { descricao: "CAROÇO", nf:"PF=225456", date:"2/24/2025", valorPago:"R$ 45.057,53" },
      { descricao: "MB DECOR", nf:"", date:"2/24/2025", valorPago:"R$ 4.491,00" },
      { descricao: "MB DECOR", nf:"", date:"2/24/2025", valorPago:"R$ 15.862,00" },
      { descricao: "MB DECOR", nf:"", date:"2/24/2025", valorPago:"R$ 8.610,00" },
      { descricao: "MB DECOR", nf:"", date:"2/24/2025", valorPago:"R$ 3.650,00" },
      { descricao: "LOTUS", nf:"", date:"2/24/2025", valorPago:"R$ 34.011,20" },
      { descricao: "SULGRILL", nf:"", date:"2/24/2025", valorPago:"R$ 9.300,00" },
      { descricao: "TRZ MOVELARIA", nf:"", date:"2/24/2025", valorPago:"R$ 4.095,00" },
      { descricao: "MUNDIAL GÁS", nf:"", date:"2/24/2025", valorPago:"R$ 420,00" },
      { descricao: "MUNDIAL GÁS", nf:"", date:"2/24/2025", valorPago:"R$ 210,00" },
      { descricao: "RESTAMP", nf:"", date:"2/24/2025", valorPago:"R$ 8.400,00" },
      { descricao: "BERTEL COMERCIAL ELETRICA LTDA", nf:"254349", date:"2/25/2025", valorPago:"R$ 343,00" },
      { descricao: "METALURGICA ALBRAS LTDA", nf:"250093", date:"2/25/2025", valorPago:"R$ 1.261,65" },
      { descricao: "METALURGICA ALBRAS LTDA", nf:"250081", date:"2/25/2025", valorPago:"R$ 21.752,64" },
      { descricao: "VERTICAL PACK", nf:"PF=5089", date:"2/25/2025", valorPago:"R$ 21.652,65" },
      { descricao: "BERTEL COMERCIAL ELETRICA LTDA", nf:"254363", date:"2/26/2025", valorPago:"R$ 781,37" },
      { descricao: "GAL COMERCIO IMPORTACAO EXPORTACAO LTDA", nf:"384354", date:"2/26/2025", valorPago:"R$ 7.360,00" },
      { descricao: "CONTHEY PRESENTES E DECORACOES LTDA", nf:"14855", date:"2/26/2025", valorPago:"R$ 14.413,91" },
      { descricao: "Cianureto Comercio de Ferro e aco EIRELI", nf:"2776", date:"2/26/2025", valorPago:"R$ 7.140,00" },
      { descricao: "BERTEL COMERCIAL ELETRICA LTDA", nf:"254375", date:"2/26/2025", valorPago:"R$ 1.351,86" },
      { descricao: "PRD_IMD NAVEGANTES", nf:"311485", date:"2/26/2025", valorPago:"R$ 7.269,26" },
      { descricao: "ACLUB - ARAUCO", nf:"323768", date:"2/26/2025", valorPago:"R$ 92.903,78" },
      { descricao: "SUPIMPA", nf:"", date:"2/26/2025", valorPago:"R$ 22.260,60" },
      { descricao: "MULTIVISÃO", nf:"225538", date:"2/26/2025", valorPago:"R$ 2.166,70" },
      { descricao: "CAROÇO", nf:"PF=225538", date:"2/26/2025", valorPago:"R$ 18.897,04" },
      { descricao: "EUCATEX RAFA", nf:"305353", date:"2/27/2025", valorPago:"R$ 24.532,41" },
      { descricao: "EUCATEX RAFA", nf:"305354", date:"2/27/2025", valorPago:"R$ 24.532,41" },
      { descricao: "EUCATEX RAFA", nf:"305355", date:"2/27/2025", valorPago:"R$ 24.532,41" },
      { descricao: "EUCATEX RAFA", nf:"305470", date:"2/27/2025", valorPago:"R$ 6.402,77" },
      { descricao: "NEPPE", nf:"328944", date:"2/27/2025", valorPago:"R$ 2.472,29" },
      { descricao: "GIVOTRADING", nf:"19", date:"2/27/2025", valorPago:"R$ 100.100,00" },
      { descricao: "EUCATEX RAFA", nf:"305472", date:"2/28/2025", valorPago:"R$ 24.532,41" },
      { descricao: "ARAUCO", nf:"323808", date:"2/28/2025", valorPago:"R$ 92.903,78" },
      { descricao: "ARAUCO", nf:"324118", date:"2/28/2025", valorPago:"R$ 92.903,78" },
      { descricao: "ACM FIBRAS", nf:"6856", date:"2/28/2025", valorPago:"R$ 64.000,00" },
      { descricao: "ACM FIBRAS", nf:"6856", date:"2/27/2025", valorPago:"R$ 23.348,16" }
    ];

    // --------------------------------------------------------------------
    // 2) Converter datas e valores para formatos consistentes
    // --------------------------------------------------------------------
    function parseValor(valorStr) {
      // Ex: "R$ 1.000,00" => 1000.00
      return parseFloat(
        valorStr
          .replace("R$","")
          .replace(/\s/g,"")
          .replace(/\./g,"")
          .replace(",",".")
      );
    }

    function fixDate(dtStr) {
      // Pode vir como "2/5/2025" ou "02/05/2025". Vamos normalizar para "MM/DD/YYYY".
      const parts = dtStr.split("/");
      const M = parts[0].padStart(2,"0");
      const D = parts[1].padStart(2,"0");
      const Y = parts[2];
      return `${M}/${D}/${Y}`;
    }

    const dataset = rawData.map(item => ({
      descricao: item.descricao,
      date: fixDate(item.date),   // "MM/DD/YYYY"
      valor: parseValor(item.valorPago)
    }));

    // --------------------------------------------------------------------
    // 3) Função para descobrir a semana de fevereiro (1..4), ou 0 se fora
    // --------------------------------------------------------------------
    function getFebruaryWeek(dateStr) {
      const [mm, dd, yyyy] = dateStr.split("/");
      if (mm !== "02" || yyyy !== "2025") return 0;
      const day = parseInt(dd, 10);
      if (day >= 1 && day <= 7)  return 1;
      if (day >= 8 && day <= 14) return 2;
      if (day >= 15 && day <= 21) return 3;
      if (day >= 22 && day <= 28) return 4;
      return 0;
    }

    // --------------------------------------------------------------------
    // 4) Somar valores por descrição e por semana
    //    sumsByDesc[desc] = [sem1, sem2, sem3, sem4]
    // --------------------------------------------------------------------
    const sumsByDesc = {};

    dataset.forEach(item => {
      const w = getFebruaryWeek(item.date);
      if (w === 0) return; // ignora se não for fev/2025
      const desc = item.descricao;
      if (!sumsByDesc[desc]) {
        sumsByDesc[desc] = [0,0,0,0];
      }
      sumsByDesc[desc][w-1] += item.valor;
    });

    // Lista única de descrições (fornecedores), ordenada
    const uniqueDescriptions = Object.keys(sumsByDesc).sort();

    // --------------------------------------------------------------------
    // 5) Montar o SELECT de filtro (TODOS + cada descrição)
    // --------------------------------------------------------------------
    const descSelect = document.getElementById("descSelect");
    const optTodos = document.createElement("option");
    optTodos.value = "TODOS";
    optTodos.text = "Todos";
    descSelect.appendChild(optTodos);

    uniqueDescriptions.forEach(desc => {
      const opt = document.createElement("option");
      opt.value = desc;
      opt.text = desc;
      descSelect.appendChild(opt);
    });

    // --------------------------------------------------------------------
    // 6) Renderização dos gráficos individuais
    // --------------------------------------------------------------------
    function renderCharts(selectedDesc) {
      const container = document.getElementById("charts-container");
      container.innerHTML = ""; // limpa gráficos anteriores

      if (selectedDesc === "TODOS") {
        // Cria um gráfico para cada fornecedor
        uniqueDescriptions.forEach(desc => createChart(desc, container));
      } else {
        createChart(selectedDesc, container);
      }
    }

    // Cria gráfico para UMA descrição (com 4 semanas + total)
    function createChart(desc, container) {
      const values = sumsByDesc[desc];
      if (!values) return;

      // Calcula o total
      const total = values.reduce((acc, val) => acc + val, 0);

      // Monta array com as 4 semanas + "Total"
      const valuesWithTotal = [...values, total];
      const categories = [
        "Semana 1 (1-7)",
        "Semana 2 (8-14)",
        "Semana 3 (15-21)",
        "Semana 4 (22-28)",
        "Total"
      ];

      // Título (apenas um H2 no HTML)
      const h2 = document.createElement("h2");
      h2.textContent = desc;
      container.appendChild(h2);

      // Div para o gráfico
      const chartDiv = document.createElement("div");
      chartDiv.className = "chart-container";
      const chartId = "chart_" + desc.replace(/\W+/g, "_");
      chartDiv.id = chartId;
      container.appendChild(chartDiv);

      // Config do ApexCharts
      const options = {
        chart: {
          type: "bar",
          height: 350
        },
        series: [
          {
            name: desc,
            data: valuesWithTotal
          }
        ],
        xaxis: {
          categories: categories
        },
        dataLabels: {
          formatter: val =>
            "R$ " + val.toLocaleString("pt-BR", { minimumFractionDigits: 2 })
        },
        tooltip: {
          y: {
            formatter: val =>
              "R$ " + val.toLocaleString("pt-BR", { minimumFractionDigits: 2 })
          }
        },
        title: {
          text: `Fornecedor - ${desc}`,
          align: "center"
        },
        subtitle: {
          text: `Total: R$ ${total.toLocaleString("pt-BR", {
            minimumFractionDigits: 2
          })}`,
          align: "center"
        }
      };

      const chart = new ApexCharts(chartDiv, options);
      chart.render();
    }

    // --------------------------------------------------------------------
    // 7) Evento de mudança do SELECT (mostrar gráficos individuais)
    // --------------------------------------------------------------------
    descSelect.addEventListener("change", () => {
      renderCharts(descSelect.value);
    });

    // --------------------------------------------------------------------
    // 8) Botão "Visão Geral" (gráfico de pizza + card com total geral)
    // --------------------------------------------------------------------
    const overviewBtn = document.getElementById("overviewBtn");
    overviewBtn.addEventListener("click", createOverviewChart);

    function createOverviewChart() {
      const container = document.getElementById("charts-container");
      container.innerHTML = ""; // limpa gráficos anteriores

      // Arrays para o gráfico de pizza
      const descArray = [];
      const totalArray = [];

      // Monta dados de cada descrição (só o total final)
      uniqueDescriptions.forEach(desc => {
        const vals = sumsByDesc[desc];
        const total = vals.reduce((acc, val) => acc + val, 0);
        descArray.push(desc);
        totalArray.push(total);
      });

      // Calcula o total geral
      const grandTotal = totalArray.reduce((acc, val) => acc + val, 0);

      // Card com o total geral
      const totalCard = document.createElement("div");
      totalCard.className = "total-card";
      totalCard.textContent = `Total Geral: R$ ${grandTotal.toLocaleString("pt-BR", { minimumFractionDigits: 2 })}`;
      container.appendChild(totalCard);

      // Div para o gráfico de pizza
      const chartDiv = document.createElement("div");
      chartDiv.className = "chart-container";
      chartDiv.id = "overview_chart";
      container.appendChild(chartDiv);

      // Config do ApexCharts (tipo "pie")
      const options = {
        chart: {
          type: "pie",
          height: 450
        },
        series: totalArray,
        labels: descArray,
        dataLabels: {
          formatter: val =>
            val.toLocaleString("pt-BR", { minimumFractionDigits: 2 }) + "%"
        },
        tooltip: {
          y: {
            formatter: val =>
              "R$ " + val.toLocaleString("pt-BR", { minimumFractionDigits: 2 })
          }
        },
        title: {
          text: "Visão Geral - Fornecedores (Pizza)",
          align: "center"
        },
        subtitle: {
          text: `Total Geral: R$ ${grandTotal.toLocaleString("pt-BR", { minimumFractionDigits: 2 })}`,
          align: "center"
        }
      };

      const chart = new ApexCharts(chartDiv, options);
      chart.render();
    }

    // --------------------------------------------------------------------
    // 9) Função de Tela Cheia
    // --------------------------------------------------------------------
    function toggleFullScreen() {
      if (!document.fullscreenElement) {
        document.body.style.backgroundColor = "#fff";
        document.documentElement.requestFullscreen();
      } else {
        document.body.style.backgroundColor = "";
        if (document.exitFullscreen) {
          document.exitFullscreen();
        }
      }
    }
    window.toggleFullScreen = toggleFullScreen;

    // --------------------------------------------------------------------
    // 10) Renderiza todos os gráficos (individuais) por padrão
    // --------------------------------------------------------------------
    descSelect.value = "TODOS";
    renderCharts("TODOS");
  </script>
</body>
</html>
